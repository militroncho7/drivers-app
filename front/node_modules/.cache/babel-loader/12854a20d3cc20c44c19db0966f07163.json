{"ast":null,"code":"var _jsxFileName = \"/Users/victor/ironhack/modulo3/drivers-app/front/src/components/LeaguesList/index.js\";\nimport React, { useState } from 'react';\nimport axios from 'axios';\nimport { Redirect } from 'react-router-dom';\nimport Button from 'components/ButtonLink/Button';\nimport getLoggedUser from 'utils/getLoggedUser';\nexport default function LeaguesList({\n  leagues\n}) {\n  const [isJoining, setIsJoining] = useState(false);\n  const [joinSuccess, setJoinSuccess] = useState(false);\n\n  async function handleJoinToLeague(leagueId) {\n    try {\n      const user = getLoggedUser();\n      const config = {\n        headers: {\n          Authorization: `Bearer ${user.token}`\n        }\n      };\n      const response = await axios.post(`http://localhost:1234/league/join`, {\n        id: leagueId\n      }, config);\n      setJoinSuccess(true);\n    } catch (exception) {// console.log(exception);\n    }\n  }\n\n  if (joinSuccess) {\n    return /*#__PURE__*/React.createElement(Redirect, {\n      to: \"/market\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 30,\n        columnNumber: 12\n      }\n    });\n  }\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"find-league\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 7\n    }\n  }, leagues.map(league => /*#__PURE__*/React.createElement(\"div\", {\n    key: `league--${league._id}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 11\n    }\n  }, league.name, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"mini-button\",\n    onClick: () => {\n      handleJoinToLeague(league._id);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 13\n    }\n  }, \"Unirme\")))), isJoining && /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      color: 'white'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 21\n    }\n  }, \"Uni\\xE9ndote a la liga...\"));\n}","map":{"version":3,"sources":["/Users/victor/ironhack/modulo3/drivers-app/front/src/components/LeaguesList/index.js"],"names":["React","useState","axios","Redirect","Button","getLoggedUser","LeaguesList","leagues","isJoining","setIsJoining","joinSuccess","setJoinSuccess","handleJoinToLeague","leagueId","user","config","headers","Authorization","token","response","post","id","exception","map","league","_id","name","color"],"mappings":";AAAA,OAAOA,KAAP,IAAeC,QAAf,QAA8B,OAA9B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAAQC,QAAR,QAAuB,kBAAvB;AACA,OAAOC,MAAP,MAAmB,8BAAnB;AACA,OAAOC,aAAP,MAA0B,qBAA1B;AAEA,eAAe,SAASC,WAAT,CAAqB;AAACC,EAAAA;AAAD,CAArB,EAAgC;AAC7C,QAAM,CAACC,SAAD,EAAYC,YAAZ,IAA4BR,QAAQ,CAAC,KAAD,CAA1C;AACA,QAAM,CAACS,WAAD,EAAcC,cAAd,IAAgCV,QAAQ,CAAC,KAAD,CAA9C;;AACA,iBAAeW,kBAAf,CAAkCC,QAAlC,EAA4C;AAC1C,QAAI;AACF,YAAMC,IAAI,GAAGT,aAAa,EAA1B;AACA,YAAMU,MAAM,GAAG;AACbC,QAAAA,OAAO,EAAE;AACPC,UAAAA,aAAa,EAAG,UAASH,IAAI,CAACI,KAAM;AAD7B;AADI,OAAf;AAKA,YAAMC,QAAQ,GAAG,MAAMjB,KAAK,CAACkB,IAAN,CACpB,mCADoB,EAErB;AAACC,QAAAA,EAAE,EAAER;AAAL,OAFqB,EAGrBE,MAHqB,CAAvB;AAKAJ,MAAAA,cAAc,CAAC,IAAD,CAAd;AACD,KAbD,CAaE,OAAOW,SAAP,EAAkB,CAClB;AACD;AACF;;AAED,MAAIZ,WAAJ,EAAiB;AACf,wBAAO,oBAAC,QAAD;AAAU,MAAA,EAAE,EAAC,SAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAP;AACD;;AAED,sBACE,uDACE;AAAK,IAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGH,OAAO,CAACgB,GAAR,CAAaC,MAAD,iBACX;AAAK,IAAA,GAAG,EAAG,WAAUA,MAAM,CAACC,GAAI,EAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGD,MAAM,CAACE,IADV,eAEE;AACE,IAAA,SAAS,EAAC,aADZ;AAEE,IAAA,OAAO,EAAE,MAAM;AACbd,MAAAA,kBAAkB,CAACY,MAAM,CAACC,GAAR,CAAlB;AACD,KAJH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAFF,CADD,CADH,CADF,EAgBGjB,SAAS,iBAAI;AAAK,IAAA,KAAK,EAAE;AAACmB,MAAAA,KAAK,EAAE;AAAR,KAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iCAhBhB,CADF;AAoBD","sourcesContent":["import React, {useState} from 'react';\nimport axios from 'axios';\nimport {Redirect} from 'react-router-dom';\nimport Button from 'components/ButtonLink/Button';\nimport getLoggedUser from 'utils/getLoggedUser';\n\nexport default function LeaguesList({leagues}) {\n  const [isJoining, setIsJoining] = useState(false);\n  const [joinSuccess, setJoinSuccess] = useState(false);\n  async function handleJoinToLeague(leagueId) {\n    try {\n      const user = getLoggedUser();\n      const config = {\n        headers: {\n          Authorization: `Bearer ${user.token}`\n        }\n      };\n      const response = await axios.post(\n        `http://localhost:1234/league/join`,\n        {id: leagueId},\n        config\n      );\n      setJoinSuccess(true);\n    } catch (exception) {\n      // console.log(exception);\n    }\n  }\n\n  if (joinSuccess) {\n    return <Redirect to=\"/market\" />;\n  }\n\n  return (\n    <>\n      <div className=\"find-league\">\n        {leagues.map((league) => (\n          <div key={`league--${league._id}`}>\n            {league.name}\n            <button\n              className=\"mini-button\"\n              onClick={() => {\n                handleJoinToLeague(league._id);\n              }}\n            >\n              Unirme\n            </button>\n          </div>\n        ))}\n      </div>\n      {isJoining && <div style={{color: 'white'}}>Uni√©ndote a la liga...</div>}\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}