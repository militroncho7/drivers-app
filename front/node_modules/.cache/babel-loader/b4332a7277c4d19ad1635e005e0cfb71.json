{"ast":null,"code":"var _jsxFileName = \"/Users/victor/ironhack/modulo3/drivers-app/front/src/pages/CreateLeague.page.js\";\nimport React, { useState } from 'react';\nimport axios from 'axios';\nimport { Redirect } from 'react-router-dom'; //Components\n\nimport LeagueView from 'components/screens/Register/League';\nimport getLoggedUser from 'utils/getLoggedUser';\nimport updateLoggedUser from 'utils/updateLoggedUser';\nexport default function CreateLeague() {\n  const [name, setName] = useState('');\n  const [error, setError] = useState('');\n  const [isCreateLeague, setIsCreateLeague] = useState(false);\n\n  async function handleSubmit(event) {\n    event.preventDefault();\n\n    try {\n      const user = getLoggedUser();\n      const config = {\n        headers: {\n          Authorization: `Bearer ${user.token}`\n        }\n      };\n      const response = await axios.post('http://localhost:1234/league/create', {\n        name\n      }, config);\n      setIsCreateLeague(true);\n      updateLoggedUser({ ...user,\n        leagueList: [...(user.leagueList ? user.leagueList : []), response.data.league]\n      });\n    } catch (exception) {\n      setError(exception.response.data.message);\n    }\n  }\n\n  function handleChangeName(event) {\n    setName(event.target.value);\n  }\n\n  if (isCreateLeague) {\n    return /*#__PURE__*/React.createElement(Redirect, {\n      to: \"/market\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 12\n      }\n    });\n  }\n\n  return /*#__PURE__*/React.createElement(LeagueView, {\n    onSubmit: handleSubmit,\n    onChangeName: handleChangeName,\n    error: error,\n    newLeague: name,\n    value: \"Go!\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 5\n    }\n  });\n}","map":{"version":3,"sources":["/Users/victor/ironhack/modulo3/drivers-app/front/src/pages/CreateLeague.page.js"],"names":["React","useState","axios","Redirect","LeagueView","getLoggedUser","updateLoggedUser","CreateLeague","name","setName","error","setError","isCreateLeague","setIsCreateLeague","handleSubmit","event","preventDefault","user","config","headers","Authorization","token","response","post","leagueList","data","league","exception","message","handleChangeName","target","value"],"mappings":";AAAA,OAAOA,KAAP,IAAeC,QAAf,QAA8B,OAA9B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAAQC,QAAR,QAAuB,kBAAvB,C,CAEA;;AACA,OAAOC,UAAP,MAAuB,oCAAvB;AACA,OAAOC,aAAP,MAA0B,qBAA1B;AACA,OAAOC,gBAAP,MAA6B,wBAA7B;AAEA,eAAe,SAASC,YAAT,GAAwB;AACrC,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBR,QAAQ,CAAC,EAAD,CAAhC;AACA,QAAM,CAACS,KAAD,EAAQC,QAAR,IAAoBV,QAAQ,CAAC,EAAD,CAAlC;AACA,QAAM,CAACW,cAAD,EAAiBC,iBAAjB,IAAsCZ,QAAQ,CAAC,KAAD,CAApD;;AAEA,iBAAea,YAAf,CAA4BC,KAA5B,EAAmC;AACjCA,IAAAA,KAAK,CAACC,cAAN;;AACA,QAAI;AACF,YAAMC,IAAI,GAAGZ,aAAa,EAA1B;AACA,YAAMa,MAAM,GAAG;AACbC,QAAAA,OAAO,EAAE;AACPC,UAAAA,aAAa,EAAG,UAASH,IAAI,CAACI,KAAM;AAD7B;AADI,OAAf;AAKA,YAAMC,QAAQ,GAAG,MAAMpB,KAAK,CAACqB,IAAN,CACrB,qCADqB,EAErB;AACEf,QAAAA;AADF,OAFqB,EAKrBU,MALqB,CAAvB;AAOAL,MAAAA,iBAAiB,CAAC,IAAD,CAAjB;AACAP,MAAAA,gBAAgB,CAAC,EACf,GAAGW,IADY;AAEfO,QAAAA,UAAU,EAAE,CAAC,IAAIP,IAAI,CAACO,UAAL,GAAkBP,IAAI,CAACO,UAAvB,GAAoC,EAAxC,CAAD,EAA8CF,QAAQ,CAACG,IAAT,CAAcC,MAA5D;AAFG,OAAD,CAAhB;AAID,KAnBD,CAmBE,OAAOC,SAAP,EAAkB;AAClBhB,MAAAA,QAAQ,CAACgB,SAAS,CAACL,QAAV,CAAmBG,IAAnB,CAAwBG,OAAzB,CAAR;AACD;AACF;;AAED,WAASC,gBAAT,CAA0Bd,KAA1B,EAAiC;AAC/BN,IAAAA,OAAO,CAACM,KAAK,CAACe,MAAN,CAAaC,KAAd,CAAP;AACD;;AAED,MAAInB,cAAJ,EAAoB;AAClB,wBAAO,oBAAC,QAAD;AAAU,MAAA,EAAE,EAAC,SAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAP;AACD;;AAED,sBACE,oBAAC,UAAD;AACE,IAAA,QAAQ,EAAEE,YADZ;AAEE,IAAA,YAAY,EAAEe,gBAFhB;AAGE,IAAA,KAAK,EAAEnB,KAHT;AAIE,IAAA,SAAS,EAAEF,IAJb;AAKE,IAAA,KAAK,EAAC,KALR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF;AASD","sourcesContent":["import React, {useState} from 'react';\nimport axios from 'axios';\nimport {Redirect} from 'react-router-dom';\n\n//Components\nimport LeagueView from 'components/screens/Register/League';\nimport getLoggedUser from 'utils/getLoggedUser';\nimport updateLoggedUser from 'utils/updateLoggedUser';\n\nexport default function CreateLeague() {\n  const [name, setName] = useState('');\n  const [error, setError] = useState('');\n  const [isCreateLeague, setIsCreateLeague] = useState(false);\n\n  async function handleSubmit(event) {\n    event.preventDefault();\n    try {\n      const user = getLoggedUser();\n      const config = {\n        headers: {\n          Authorization: `Bearer ${user.token}`\n        }\n      };\n      const response = await axios.post(\n        'http://localhost:1234/league/create',\n        {\n          name\n        },\n        config\n      );\n      setIsCreateLeague(true);\n      updateLoggedUser({\n        ...user,\n        leagueList: [...(user.leagueList ? user.leagueList : []), response.data.league]\n      });\n    } catch (exception) {\n      setError(exception.response.data.message);\n    }\n  }\n\n  function handleChangeName(event) {\n    setName(event.target.value);\n  }\n\n  if (isCreateLeague) {\n    return <Redirect to=\"/market\" />;\n  }\n\n  return (\n    <LeagueView\n      onSubmit={handleSubmit}\n      onChangeName={handleChangeName}\n      error={error}\n      newLeague={name}\n      value=\"Go!\"\n    />\n  );\n}\n"]},"metadata":{},"sourceType":"module"}